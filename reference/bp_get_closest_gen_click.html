<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clicking helpers — bp_get_closest_gen_click • dv.explorer.parameter</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clicking helpers — bp_get_closest_gen_click"><meta name="description" content="The boxplot requires several helpers to manage the clicks. The main function is bp_get_closest_gen_click, and the
other two are specific calls for click and double_click events.
bp_get_closest_gen_click


This function takes a dataset and a general click and returns the closest row to the click. It uses the
shiny::nearPoints. shiny::nearpoints function is not particularly well-behaved in two cases:
The ggplot does contain several facet levels
Solved by:
Prefiltering ds manually so it only contains the rows corresponding to the clicked facet
The ggplot lacks an x or y aesthetic
Solved by:
In this particular case the x aesthetic correspond to the CNT$MAIN_GROUP column. If no grouping
is specified during the selection this function assumes that a dummy x aesthetic was used in boxplot_chart.
Therefore, this dummy variable is introduced as a column in ds, and shiny::nearPoints can be used.
The aesthetic has been defined using the .data pronoun to overcome NSE used in ggplot2::ggplot
Solved by:
Stripping .data pronouns before passing them into shiny::nearPoints





Specific calls:


After a click is made and a table shown, when the dataset changes, the app reaches this function in an invalid state
where ds contains the new dataset and click contains the click from the previous dataset. This usually provokes
that a 0-row dataset is returned.

"><meta property="og:description" content="The boxplot requires several helpers to manage the clicks. The main function is bp_get_closest_gen_click, and the
other two are specific calls for click and double_click events.
bp_get_closest_gen_click


This function takes a dataset and a general click and returns the closest row to the click. It uses the
shiny::nearPoints. shiny::nearpoints function is not particularly well-behaved in two cases:
The ggplot does contain several facet levels
Solved by:
Prefiltering ds manually so it only contains the rows corresponding to the clicked facet
The ggplot lacks an x or y aesthetic
Solved by:
In this particular case the x aesthetic correspond to the CNT$MAIN_GROUP column. If no grouping
is specified during the selection this function assumes that a dummy x aesthetic was used in boxplot_chart.
Therefore, this dummy variable is introduced as a column in ds, and shiny::nearPoints can be used.
The aesthetic has been defined using the .data pronoun to overcome NSE used in ggplot2::ggplot
Solved by:
Stripping .data pronouns before passing them into shiny::nearPoints





Specific calls:


After a click is made and a table shown, when the dataset changes, the app reaches this function in an invalid state
where ds contains the new dataset and click contains the click from the previous dataset. This usually provokes
that a 0-row dataset is returned.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dv.explorer.parameter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/boxplot.html">Boxplot module</a></li>
    <li><a class="dropdown-item" href="../articles/correlation_heatmap.html">Correlation heatmap module</a></li>
    <li><a class="dropdown-item" href="../articles/forest.html">Forest plot module</a></li>
    <li><a class="dropdown-item" href="../articles/lineplot_main_article.html">Lineplot module</a></li>
    <li><a class="dropdown-item" href="../articles/lineplot_reference_values.html">Lineplot reference values</a></li>
    <li><a class="dropdown-item" href="../articles/qc.html">Quality Control</a></li>
    <li><a class="dropdown-item" href="../articles/roc.html">ROC</a></li>
    <li><a class="dropdown-item" href="../articles/scatterplot.html">Scatterplot module</a></li>
    <li><a class="dropdown-item" href="../articles/scatterplotmatrix.html">Matrix of Scatterplots module</a></li>
    <li><a class="dropdown-item" href="../articles/wfphm.html">Waterfall plus heatmap module</a></li>
    <li><a class="dropdown-item" href="../articles/zz_buildinfo.html">Build Info</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/qc.html">Quality Control</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clicking helpers</h1>

      <div class="d-none name"><code>bp_get_closest_gen_click.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The boxplot requires several helpers to manage the clicks. The main function is <code>bp_get_closest_gen_click</code>, and the
other two are specific calls for <code>click</code> and <code>double_click</code> events.</p><div class="section">
<h3 id="bp-get-closest-gen-click">bp_get_closest_gen_click<a class="anchor" aria-label="anchor" href="#bp-get-closest-gen-click"></a></h3>


<p>This function takes a dataset and a general click and returns the closest row to the click. It uses the
<a href="https://rdrr.io/pkg/shiny/man/brushedPoints.html" class="external-link">shiny::nearPoints</a>. <a href="https://rdrr.io/pkg/shiny/man/brushedPoints.html" class="external-link">shiny::nearpoints</a> function is not particularly well-behaved in two cases:</p><ul><li><p>The ggplot does contain several facet levels
Solved by:
Prefiltering <code>ds</code> manually so it only contains the rows corresponding to the clicked facet</p></li>
<li><p>The ggplot lacks an <code>x</code> or <code>y</code> aesthetic
Solved by:
In this particular case the <code>x</code> aesthetic correspond to the <code>CNT$MAIN_GROUP</code> column. If no grouping
is specified during the selection this function assumes that a dummy <code>x</code> aesthetic was used in <a href="boxplot_chart.html">boxplot_chart</a>.
Therefore, this dummy variable is introduced as a column in <code>ds</code>, and <a href="https://rdrr.io/pkg/shiny/man/brushedPoints.html" class="external-link">shiny::nearPoints</a> can be used.</p></li>
<li><p>The aesthetic has been defined using the <code>.data</code> pronoun to overcome NSE used in <a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot</a>
Solved by:
Stripping <code>.data</code> pronouns before passing them into <a href="https://rdrr.io/pkg/shiny/man/brushedPoints.html" class="external-link">shiny::nearPoints</a></p></li>
</ul></div>

<div class="section">
<h3 id="specific-calls-">Specific calls:<a class="anchor" aria-label="anchor" href="#specific-calls-"></a></h3>


<p>After a click is made and a table shown, when the dataset changes, the app reaches this function in an invalid state
where <code>ds</code> contains the new dataset and <code>click</code> contains the click from the previous dataset. This usually provokes
that a 0-row dataset is returned.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bp_get_closest_gen_click</span><span class="op">(</span><span class="va">ds</span>, <span class="va">click</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bp_get_closest_single_click</span><span class="op">(</span><span class="va">ds</span>, <span class="va">click</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bp_get_closest_double_click</span><span class="op">(</span><span class="va">ds</span>, <span class="va">click</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-ds">ds<a class="anchor" aria-label="anchor" href="#arg-ds"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code></p>
<p>A data frame containing the data to be filtered.</p></dd>


<dt id="arg-click">click<a class="anchor" aria-label="anchor" href="#arg-click"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code></p>
<p>A list containing the click information as received from the <code>Shiny</code> input</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>data.frame</code></p>
<p>A data frame containing the closest row in <code>ds</code> to the click.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Luis Moris Fernandez, Miguel Lechon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

