<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dv.explorer.parameter">
<title>Correlation heatmap module • dv.explorer.parameter</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Correlation heatmap module">
<meta property="og:description" content="dv.explorer.parameter">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dv.explorer.parameter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/boxplot.html">Boxplot module</a>
    <a class="dropdown-item" href="../articles/correlation_heatmap.html">Correlation heatmap module</a>
    <a class="dropdown-item" href="../articles/forest.html">Forest plot module</a>
    <a class="dropdown-item" href="../articles/lineplot.html">Lineplot module</a>
    <a class="dropdown-item" href="../articles/qc.html">Quality Control</a>
    <a class="dropdown-item" href="../articles/roc.html">ROC</a>
    <a class="dropdown-item" href="../articles/scatterplot.html">Scatterplot module</a>
    <a class="dropdown-item" href="../articles/scatterplotmatrix.html">Matrix of Scatterplots module</a>
    <a class="dropdown-item" href="../articles/wfphm.html">Waterfall plus heatmap module</a>
    <a class="dropdown-item" href="../articles/zz_buildinfo.html">Build Info</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="correlation_heatmap_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Correlation heatmap module</h1>
            
      
      
      <div class="d-none name"><code>correlation_heatmap.Rmd</code></div>
    </div>

    
    
<p><img src="images/hm_corr_chart.jpg"></p>
<p>This guide provides guidance on creating Apps in DaVinci using the <code>correlation heatmap</code> module. Walk-throughs for sample app creation are also included to demonstrate various module-specific features.</p>
<p>The <code>correlation heatmap</code> module displays a heatmap of correlation coefficients (Pearson, Spearman) along with confidence intervals and p-values between pairs of dataset parameters over a single visit.</p>
<div class="section level4">
<h4 id="pre-requisite">Pre-requisite:<a class="anchor" aria-label="anchor" href="#pre-requisite"></a>
</h4>
<p><br></p>
<div style="padding: 1em 1em 1em 1em;  margin-bottom: 5px;  border: 1px solid #64a1ce;  border-radius: 5px;  background:#f5f5f5 5px center/3em no-repeat;">
<p><img src="images/info.png" style="width:4.0%"><strong>“Parameter” Term Disambiguation</strong></p>
<p>The guide uses the term <strong>“parameter”</strong> at several places. This term in the guide represents clinical analysis parameters and values such as laboratory values, safety values, etc as used in the clinical dataset context. This can be confused with the word parameter as used in a programming context - “parameters of a function”. Therefore, to fully disambiguate the usage in this guide:</p>
<ul>
<li>
<strong>Parameter</strong> is used exclusively in the clinical dataset context</li>
<li>
<strong>Argument</strong> is used to represent parameter of a function in the programming context</li>
</ul>
</div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<p>The <code>correlation heatmap</code> module offers the following features:</p>
<ul>
<li>Heatmap of correlations, with numerical coefficients overlayed on top and statistical significance denoted by asterisks.</li>
<li>Listing expanding the correlation information with confidence intervals and p-values.</li>
<li>Basic interactive drill-down scatter plot to examine combinations of pairs of parameters present on the heatmap.</li>
</ul>
<p>This module supports bookmarking.</p>
</div>
<div class="section level2">
<h2 id="module-arguments">Module arguments<a class="anchor" aria-label="anchor" href="#module-arguments"></a>
</h2>
<p>The <code><a href="../reference/mod_corr_hm.html">dv.explorer.parameter::mod_corr_hm()</a></code> module presents mandatory and optional function arguments to the app creator.</p>
<p><strong>Mandatory Arguments</strong></p>
<ul>
<li><p><code>module_id</code> : A unique identifier of type character for the module in the app.</p></li>
<li>
<p><code>bm_dataset_name</code>: The dataset that contains the continuous parameters. It expects a dataset similar to <a href="https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192" class="external-link uri">https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192</a> , 1 record per subject per parameter per analysis visit.</p>
<p>It should have, at least, the columns passed in the optional arguments, <code>subjid_var</code>, <code>cat_var</code>, <code>par_var</code>, <code>visit_var</code> and <code>value_vars</code>.</p>
</li>
</ul>
<p>Refer to <code><a href="../reference/mod_corr_hm.html">dv.explorer.parameter::mod_corr_hm()</a></code> for the complete list of arguments and their description.</p>
</div>
<div class="section level2">
<h2 id="input-menus">Input menus<a class="anchor" aria-label="anchor" href="#input-menus"></a>
</h2>
<p>The module offers to drop-down menus. The first one allows to select parameters and visits for the visualization. On each of its rows, the user can select a combination of parameters, belonging to one or more categories, over one or more visits. New rows appear every time a row is complete, allowing to mix parameters and visits in a flexible manner.</p>
<p>The final selection can be described as the union of the cartesian product of the elements selected on each row.</p>
<p><img src="images/corr_hm_menu_00.jpg"></p>
<p>The second drop-down allows to pick one of the two built-in correlation methods.</p>
<p><img src="images/corr_hm_menu_01.jpg"></p>
</div>
<div class="section level2">
<h2 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h2>
<div class="section level3">
<h3 id="correlation-heatmap">Correlation Heatmap<a class="anchor" aria-label="anchor" href="#correlation-heatmap"></a>
</h3>
<p>This is the main plot. It consists of a diagonally symmetrical heatmap of correlation coefficients. The lower-left triangle of the heatmap displays rounded coefficient values an highlights statistically significant coefficients using asterisks. Clicking any one of the squares brings up a scatter plot of the two variables that intersect on that square.</p>
<p>Rounding is mathematical (round-to-even) with two decimals. Significance is based on a 2-sided, uncorrected for multiple comparisons p-value.</p>
<p><img src="images/corr_hm_01.jpg"></p>
</div>
<div class="section level3">
<h3 id="scatter-plot">Scatter plot<a class="anchor" aria-label="anchor" href="#scatter-plot"></a>
</h3>
<p>This secondary plot provides a basic overview of the shape of the data that contributes to a particular correlation coefficient. It is intentionally limited in its intent, given that the <code>dv.general.biomarker</code> family of modules includes the feature-rich <a href="scatterplot.html">scatterplot</a> and <a href="scatterplotmatrix.html">matrix of scatterplots</a> modules.</p>
<p><img src="images/corr_hm_02.jpg"></p>
</div>
</div>
<div class="section level2">
<h2 id="listings">Listings<a class="anchor" aria-label="anchor" href="#listings"></a>
</h2>
<div class="section level3">
<h3 id="correlation-listing">Correlation listing<a class="anchor" aria-label="anchor" href="#correlation-listing"></a>
</h3>
<p>Below the graphics there is a table listing all pairs of parameter-visit combinations and their corresponding correlation coefficients, p-values, confidence intervals and number of points contributing to the calculation. Decimal values on this table are rounded (mathematical, round-to-even) to four digits of precision.</p>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-correlation-heatmap-application">Creating a correlation heatmap application<a class="anchor" aria-label="anchor" href="#creating-a-correlation-heatmap-application"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adbm_dataset</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="va">adbm_example</span>,</span>
<span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>,</span>
<span>  PARCAT1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">PARCAT1</span><span class="op">)</span>,</span>
<span>  PARAM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">PARAM</span><span class="op">)</span>,</span>
<span>  AVISIT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl_dataset</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="va">adsl_example</span>,</span>
<span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dv.manager/man/run_app.html" class="external-link">run_app</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"DS"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adbm <span class="op">=</span> <span class="va">adbm_dataset</span>, adsl <span class="op">=</span> <span class="va">adsl_dataset</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  module_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Correlation Heatmap"</span> <span class="op">=</span> <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_corr_hm.html">mod_corr_hm</a></span><span class="op">(</span></span>
<span>      <span class="st">"forestplot"</span>,</span>
<span>      bm_dataset_name <span class="op">=</span> <span class="st">"adbm"</span>,</span>
<span>      subjid_var <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      cat_var <span class="op">=</span> <span class="st">"PARCAT1"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  filter_data <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>  filter_key <span class="op">=</span> <span class="st">"USUBJID"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Luis Moris Fernandez, Miguel Lechon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
