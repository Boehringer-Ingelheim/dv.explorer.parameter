<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ROC • dv.explorer.parameter</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ROC">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dv.explorer.parameter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/boxplot.html">Boxplot module</a></li>
    <li><a class="dropdown-item" href="../articles/correlation_heatmap.html">Correlation heatmap module</a></li>
    <li><a class="dropdown-item" href="../articles/forest.html">Forest plot module</a></li>
    <li><a class="dropdown-item" href="../articles/lineplot_main_article.html">Lineplot module</a></li>
    <li><a class="dropdown-item" href="../articles/lineplot_reference_values.html">Lineplot reference values</a></li>
    <li><a class="dropdown-item" href="../articles/qc.html">Quality Control</a></li>
    <li><a class="dropdown-item" href="../articles/roc.html">ROC</a></li>
    <li><a class="dropdown-item" href="../articles/scatterplot.html">Scatterplot module</a></li>
    <li><a class="dropdown-item" href="../articles/scatterplotmatrix.html">Matrix of Scatterplots module</a></li>
    <li><a class="dropdown-item" href="../articles/wfphm.html">Waterfall plus heatmap module</a></li>
    <li><a class="dropdown-item" href="../articles/zz_buildinfo.html">Build Info</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/qc.html">Quality Control</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>ROC</h1>
            
      

      <div class="d-none name"><code>roc.Rmd</code></div>
    </div>

    
    
<p><img src="images%2FROC.png"></p>
<p>This guide provides a detailed overview of the <code>mod_roc</code>
module and its features. It is meant to provide guidance to App Creators
on creating Apps in DaVinci using the <code>mod_roc</code> module.
Walk-throughs for sample app creation using the module are also included
to demonstrate the various module specific features.</p>
<p>The <code>mod_roc</code> module makes it possible to visualize a set
of ROC related charts and compare independent ROC curves for different
continuous parameters with respect to a single binary endpoint. This
allows a user to evaluate how predictive is a continuous parameter of
binary endpoint.</p>
<div class="section level4">
<h4 id="pre-requisite">Pre-requisite:<a class="anchor" aria-label="anchor" href="#pre-requisite"></a>
</h4>
<p><br></p>
<div style="padding: 1em 1em 1em 1em;  margin-bottom: 5px;  border: 1px solid #64a1ce;  border-radius: 5px;  background:#f5f5f5 5px center/3em no-repeat;">
<p><img src="images%2Finfo.png" style="width:4.0%"><strong>“Parameter”
Term Disambiguation</strong></p>
<p>The guide uses the term <strong>“parameter”</strong> at several
places. This term in the guide represents clinical analysis parameters
and values such as laboratory values, safety values, etc as used in the
clinical dataset context. This can be confused with the word parameter
as used in a programming context - “parameters of a function”.
Therefore, to fully disambiguate the usage in this guide:</p>
<ul>
<li>
<strong>Parameter</strong> is used exclusively in the clinical
dataset context</li>
<li>
<strong>Argument</strong> is used to represent parameter of a
function in the programming context</li>
</ul>
</div>
<p><br></p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<p><code>mod_roc</code> features the following plots:</p>
<ul>
<li>A set of ROC curves</li>
<li>A set of histograms showing the distribution of the continuous
parameter values</li>
<li>A set of probability density plots showing the distribution of the
continuous parameter values</li>
<li>A set of raincloud plots showing the distribution of the continuous
parameter values</li>
<li>A set of line plots showing metrics for the results of the
classification</li>
<li>A point plot indicating the AUC for each parameter/parameter-group
combination</li>
<li>A summary table for the ROC analysis</li>
</ul>
<p><br></p>
</div>
<div class="section level2">
<h2 id="arguments-for-the-module">Arguments for the module<a class="anchor" aria-label="anchor" href="#arguments-for-the-module"></a>
</h2>
<p><code><a href="../reference/mod_roc.html">dv.explorer.parameter::mod_roc()</a></code> module uses several
arguments with the following being mandatory and the rest optional. As
part of app creation, the app creator should specify the values for
these arguments as applicable.</p>
<p><strong>Mandatory Arguments</strong></p>
<ul>
<li><p><code>module_id</code> : A unique identifier of type character
for the module in the app.</p></li>
<li><p><code>subjid_var</code>: A common column across all datasets that
uniquely identify subjects. By default: “SUBJID”</p></li>
<li>
<p><code>pred_dataset_name</code>: The name of the dataset that
contains the continuous parameters to be used as predictors in the ROC
analysis. It expects a dataset similar to <a href="https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192" class="external-link uri">https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192</a>
, 1 record per subject per parameter per analysis visit</p>
<p>It expects, at least, the columns passed in the arguments,
<code>subjid_var</code>, <code>pred_cat_var</code>,
<code>pred_par_var</code>, <code>pred_visit_var</code> and
<code>pred_value_var</code>.</p>
</li>
<li>
<p><code>resp_dataset_name</code>: The name of the dataset that
contains the parameters to be used as responses/binary endpoints in the
ROC analysis. It expects a dataset similar to <a href="https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192" class="external-link uri">https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192</a>
, 1 record per subject per parameter per analysis visit</p>
<p>It expects, at least, the columns passed in the arguments,
<code>subjid_var</code>, <code>resp_cat_var</code>,
<code>resp_par_var</code>, <code>resp_visit_var</code> and
<code>resp_value_var</code>.</p>
</li>
<li>
<p><code>group_dataset_name</code>: The name of the dataset that
contains the variables that will be used to group plots in the
module.</p>
<p>It expects a dataset with an structure similar to <a href="https://www.cdisc.org/kb/examples/adam-subject-level-analysis-adsl-dataset-80283806" class="external-link uri">https://www.cdisc.org/kb/examples/adam-subject-level-analysis-adsl-dataset-80283806</a>
, one record per subject It expects to contain, at least,
<code>subjid_var</code>.</p>
</li>
</ul>
<p>Refer to <code><a href="../reference/mod_roc.html">dv.explorer.parameter::mod_roc()</a></code> for the
complete list of arguments and their description.</p>
</div>
<div class="section level2">
<h2 id="input-menus">Input menus<a class="anchor" aria-label="anchor" href="#input-menus"></a>
</h2>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<tbody><tr class="odd">
<td><img src="images%2Fpredictor_menu.png"></td>
<td><img src="images%2Fresponse_menu.png"></td>
<td><img src="images%2Fother_menu.png"></td>
</tr></tbody>
</table>
<p>A set of menus allows to select which parameters will be used as
predictors for the response variable and customize the visualization in
the module.</p>
</div>
<div class="section level2">
<h2 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h2>
<div class="section level3">
<h3 id="roc">ROC<a class="anchor" aria-label="anchor" href="#roc"></a>
</h3>
<p>This visualizations consists of a facetted plot based on parameters
and grouping variable. Each plot represents a ROC curve with a set of
confidence intervals (as defined in <strong>Other</strong> menu)and
optimal cut points (see
<code><a href="../reference/compute_roc.html">dv.explorer.parameter::compute_roc()</a></code>). Hovering over the
figure will show a tooltip providing additional information for each of
the points.</p>
<p>Facetting can be replaced by a Nx4 matrix of plots sorted by AUC.</p>
<p><img src="images%2FROC.png"></p>
</div>
<div class="section level3">
<h3 id="histogram-and-density">Histogram and Density<a class="anchor" aria-label="anchor" href="#histogram-and-density"></a>
</h3>
<p>This visualizations consists of a facetted plot based on parameters
and grouping variable. Each plot represents a histogram or density plot
for the values of each predictor parameter grouped and colored based on
the response value.</p>
<table class="table"><tbody><tr class="odd">
<td><img src="images%2Fhisto.png"></td>
<td><img src="images%2Fdens.png"></td>
</tr></tbody></table>
</div>
<div class="section level3">
<h3 id="raincloud">Raincloud<a class="anchor" aria-label="anchor" href="#raincloud"></a>
</h3>
<p>This visualization consists of a facetted plot based on parameters
and grouping variable. Each plot represents a raincloud plot for the
values of each predictor parameter grouped and colored based on the
response value. The top part of the raincloud corresponds to a density
plot, the bottom part correspond to individual data points, and the
markes between them correspond to %5, 25%, 50%, 75% and 95% quantiles.
Hovering over the figure will show a tooltip providing additional
information for each of the points and markers.</p>
<p><img src="images%2Frain.png"></p>
</div>
<div class="section level3">
<h3 id="metrics">Metrics<a class="anchor" aria-label="anchor" href="#metrics"></a>
</h3>
<p>This visualization consists of a facetted plot based on parameters
and metrics and colored based on grouping. Each plot represents a line
graph indicating the performance of the classification with respect to
the threshold use for classification. The X axis can represent the score
represented by the parameter value, raw, normalized or normalized and
ranked.</p>
<p><img src="images%2Fmetrics.png"></p>
</div>
<div class="section level3">
<h3 id="explore">Explore<a class="anchor" aria-label="anchor" href="#explore"></a>
</h3>
<p>This visualization consists of a sorted lineplot representing the AUC
and its confidence interval per parameter, or parameter and grouping.
All predictors parameters are represented regardless of the selection in
the Predictor menu.</p>
<p><img src="images%2Fexplore.png"></p>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>This table summarizes the results of the ROC curves and its optimal
cut points.</p>
<p><img src="images%2Fsummary.png"></p>
</div>
</div>
<div class="section level2">
<h2 id="custom-compute-functions">Custom Compute Functions<a class="anchor" aria-label="anchor" href="#custom-compute-functions"></a>
</h2>
<p>This module provides the user with some default ROC analysis
functions, nonetheless there are different approaches or preferences for
different packages that performs this type of analysis. Additionally,
because it is a data derivation, the user is provided and in charge of
checking those functions and calculations. For this purpose this
analysis functionality is isolated and can be modified and checked
independently.</p>
<p>The default functions in charge of this calculations are
<code><a href="../reference/compute_roc.html">compute_roc_data()</a></code> and <code><a href="../reference/compute_metric.html">compute_metric_data()</a></code>.
But the user can create alternative functions, for example for which
metrics are presented. This can be done simply by writing another
function that have the same arguments and returns a similar data
structure, see the documentation of the functions for further details.
Two helper functions <code><a href="../reference/compute_roc.html">assert_compute_roc_data()</a></code> and
<code><a href="../reference/compute_metric.html">assert_compute_metric_data()</a></code> can be used to check that the
output of the user-defined function is correct (this checking is not
exhaustive and is only prepared to catch common errors).</p>
</div>
<div class="section level2">
<h2 id="creating-a-roc-application">Creating a ROC application<a class="anchor" aria-label="anchor" href="#creating-a-roc-application"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">adbm_dataset</span> <span class="op">&lt;-</span> <span class="fu">test_roc_data</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"adbm"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">adbin_dataset</span> <span class="op">&lt;-</span> <span class="fu">test_roc_data</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"adbin"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">adsl_dataset</span> <span class="op">&lt;-</span> <span class="fu">test_roc_data</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"adsl"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">module_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"ROC"</span> <span class="op">=</span> <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_roc.html">mod_roc</a></span><span class="op">(</span></span>
<span>          module_id <span class="op">=</span> <span class="st">"mod_roc"</span>,</span>
<span>          pred_dataset_name <span class="op">=</span> <span class="st">"adbm"</span>,</span>
<span>          resp_dataset_name <span class="op">=</span> <span class="st">"adbin"</span>,</span>
<span>          group_dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>          pred_cat_var <span class="op">=</span> <span class="st">"PARCAT"</span>,</span>
<span>          pred_par_var <span class="op">=</span> <span class="st">"PARAM"</span>,</span>
<span>          pred_value_vars <span class="op">=</span> <span class="st">"AVAL"</span>,</span>
<span>          pred_visit_var <span class="op">=</span> <span class="st">"AVISIT"</span>,</span>
<span>          resp_cat_var <span class="op">=</span> <span class="st">"PARCAT"</span>,</span>
<span>          resp_par_var <span class="op">=</span> <span class="st">"PARAM"</span>,</span>
<span>          resp_value_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CHG1"</span>, <span class="st">"CHG2"</span><span class="op">)</span>,</span>
<span>          resp_visit_var <span class="op">=</span> <span class="st">"AVISIT"</span>,</span>
<span>          subjid_var <span class="op">=</span> <span class="st">"USUBJID"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span></span>
<span>    <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dv.manager/man/run_app.html" class="external-link">run_app</a></span><span class="op">(</span></span>
<span>      data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"Sample Data"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          adbm <span class="op">=</span> <span class="va">adbm_dataset</span>,</span>
<span>          adbin <span class="op">=</span> <span class="va">adbin_dataset</span>,</span>
<span>          adsl <span class="op">=</span> <span class="va">adsl_dataset</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      module_list <span class="op">=</span> <span class="va">module_list</span>,</span>
<span>      filter_data <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>      filter_key <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      enableBookmarking <span class="op">=</span> <span class="st">"url"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Luis Moris Fernandez, Miguel Lechon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
