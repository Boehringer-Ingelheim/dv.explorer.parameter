<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Forest plot module • dv.explorer.parameter</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Forest plot module">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dv.explorer.parameter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/boxplot.html">Boxplot module</a></li>
    <li><a class="dropdown-item" href="../articles/correlation_heatmap.html">Correlation heatmap module</a></li>
    <li><a class="dropdown-item" href="../articles/forest.html">Forest plot module</a></li>
    <li><a class="dropdown-item" href="../articles/lineplot_main_article.html">Lineplot module</a></li>
    <li><a class="dropdown-item" href="../articles/lineplot_reference_values.html">Lineplot reference values</a></li>
    <li><a class="dropdown-item" href="../articles/qc.html">Quality Control</a></li>
    <li><a class="dropdown-item" href="../articles/roc.html">ROC</a></li>
    <li><a class="dropdown-item" href="../articles/scatterplot.html">Scatterplot module</a></li>
    <li><a class="dropdown-item" href="../articles/scatterplotmatrix.html">Matrix of Scatterplots module</a></li>
    <li><a class="dropdown-item" href="../articles/wfphm.html">Waterfall plus heatmap module</a></li>
    <li><a class="dropdown-item" href="../articles/zz_buildinfo.html">Build Info</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/qc.html">Quality Control</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Forest plot module</h1>
            
      

      <div class="d-none name"><code>forest.Rmd</code></div>
    </div>

    
    
<p><img src="images%2Fforest_chart.jpg"></p>
<p>This guide provides guidance on creating Apps in DaVinci using the
<code>forest</code> module. Walk-throughs for sample app creation are
also included to demonstrate various module-specific features.</p>
<p>The <code>forest</code> module displays a hybrid table/forest plot of
arbitrary statistics (correlations, odds ratios, …) computed on dataset
parameters over a single visit.</p>
<div class="section level4">
<h4 id="pre-requisite">Pre-requisite:<a class="anchor" aria-label="anchor" href="#pre-requisite"></a>
</h4>
<p><br></p>
<div style="padding: 1em 1em 1em 1em;  margin-bottom: 5px;  border: 1px solid #64a1ce;  border-radius: 5px;  background:#f5f5f5 5px center/3em no-repeat;">
<p><img src="images%2Finfo.png" style="width:4.0%"><strong>“Parameter”
Term Disambiguation</strong></p>
<p>The guide uses the term <strong>“parameter”</strong> at several
places. This term in the guide represents clinical analysis parameters
and values such as laboratory values, safety values, etc as used in the
clinical dataset context. This can be confused with the word parameter
as used in a programming context - “parameters of a function”.
Therefore, to fully disambiguate the usage in this guide:</p>
<ul>
<li>
<strong>Parameter</strong> is used exclusively in the clinical
dataset context</li>
<li>
<strong>Argument</strong> is used to represent parameter of a
function in the programming context</li>
</ul>
</div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<p>The <code>forest</code> module offers the following features:</p>
<ul>
<li>Table with results of applying arbitrary app-creator-supplied
functions over pairs of parameters of a dataset.</li>
<li>Hover-on explanation of <code>NA</code> results on cells of that
table.</li>
<li>Row-aligned plot depicting table results.</li>
</ul>
<p>This module supports bookmarking.</p>
</div>
<div class="section level2">
<h2 id="module-arguments">Module arguments<a class="anchor" aria-label="anchor" href="#module-arguments"></a>
</h2>
<p>The <code><a href="../reference/mod_forest.html">dv.explorer.parameter::mod_forest()</a></code> module presents
mandatory and optional function arguments to the app creator.</p>
<p><strong>Mandatory Arguments</strong></p>
<ul>
<li><p><code>module_id</code> : A unique identifier of type character
for the module in the app.</p></li>
<li>
<p><code>bm_dataset_name</code>: The dataset that contains the
continuous parameters. It expects a dataset similar to <a href="https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192" class="external-link uri">https://www.cdisc.org/kb/examples/adam-basic-data-structure-bds-using-paramcd-80288192</a>
, 1 record per subject per parameter per analysis visit.</p>
<p>It should have, at least, the columns passed in the optional
arguments, <code>subjid_var</code>, <code>cat_var</code>,
<code>par_var</code>, <code>visit_var</code> and
<code>value_vars</code>.</p>
</li>
<li>
<p><code>group_dataset_name</code>:</p>
<p>It expects a dataset with a structure similar to <a href="https://www.cdisc.org/kb/examples/adam-subject-level-analysis-adsl-dataset-80283806" class="external-link uri">https://www.cdisc.org/kb/examples/adam-subject-level-analysis-adsl-dataset-80283806</a>
, one record per subject It should have, at least, the column passed in
the optional argument <code>subjid_var</code>.</p>
</li>
<li>
<p><code>numeric_numeric_functions</code> and
<code>numeric_factor_functions</code>:</p>
<p>The application creator can supply two lists of arbitrary functions
through these arguments.</p>
<p>These functions will be applied to user-selected pair-wise
combinations of parameters of <code>bm_dataset</code> and should return
four numeric values. Two of those values will be used to define the
range of the “trees” of the forest plot, another one will mark the
central value of each of them and the remaining value will only be shown
as part of the table accompanying the plot.</p>
<p>Example: Function that returns a correlation coefficient between to
numerical parameters, along with upper and lower confidence intervals
and a p-value.</p>
<p>As the names of the arguments imply,
<code>numeric_numeric_functions</code> apply to combination of numerical
paramaters on the dataset, while <code>numeric_factor_functions</code>
needs for one of them to be categorical and encoded as
<code>factor</code>.</p>
</li>
</ul>
<p>Refer to <code><a href="../reference/mod_forest.html">dv.explorer.parameter::mod_forest()</a></code> for the
complete list of arguments and their description.</p>
</div>
<div class="section level2">
<h2 id="input-menus">Input menus<a class="anchor" aria-label="anchor" href="#input-menus"></a>
</h2>
<p>Input menus are integrated as part of the figure title. Portions of
the title are stylized as hyperlinks and reveal the relevant pop-up
menus when clicked.</p>
<p><img src="images%2Fforest_menu_00.jpg"></p>
<p><img src="images%2Fforest_menu_01.jpg"></p>
<p><img src="images%2Fforest_menu_02.jpg"></p>
<p><img src="images%2Fforest_menu_03.jpg"></p>
<p><img src="images%2Fforest_menu_04.jpg"></p>
</div>
<div class="section level2">
<h2 id="hybrid-tableplot">Hybrid table/plot<a class="anchor" aria-label="anchor" href="#hybrid-tableplot"></a>
</h2>
<p>This visualizations consists of a table and a row-aligned forest
plot. The plot makes it easier for the user to navigate the data.
Controls embedded in the table headings allow arbitrary reorderings of
the table (e.g. ascending Pearson correlation coefficient shown in the
following image).</p>
<p><img src="images%2Fforest_01.jpg"></p>
</div>
<div class="section level2">
<h2 id="creating-a-forest-plot-application">Creating a forest plot application<a class="anchor" aria-label="anchor" href="#creating-a-forest-plot-application"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adbm_dataset</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  <span class="fu">dv.explorer.parameter</span><span class="fu">:::</span><span class="fu">safety_data</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"bm"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span>,</span>
<span>  PARCAT1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">PARCAT1</span><span class="op">)</span>,</span>
<span>  PARAM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">PARAM</span><span class="op">)</span>,</span>
<span>  AVISIT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl_dataset</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  <span class="fu">dv.explorer.parameter</span><span class="fu">:::</span><span class="fu">safety_data</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"sl"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fp_numeric_numeric_functions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Pearson Correlation"</span> <span class="op">=</span> <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="va"><a href="../reference/fp_stats.html">pearson_correlation</a></span>,</span>
<span>  <span class="st">"Spearman Correlation"</span> <span class="op">=</span> <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="va"><a href="../reference/fp_stats.html">spearman_correlation</a></span></span>
<span><span class="op">)</span></span>
<span><span class="va">fp_numeric_factor_functions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Odds Ratio"</span> <span class="op">=</span> <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="va"><a href="../reference/fp_stats.html">odds_ratio</a></span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dv.manager/man/run_app.html" class="external-link">run_app</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"DS"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adbm <span class="op">=</span> <span class="va">adbm_dataset</span>, adsl <span class="op">=</span> <span class="va">adsl_dataset</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  module_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Forest Plot"</span> <span class="op">=</span> <span class="fu">dv.explorer.parameter</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_forest.html">mod_forest</a></span><span class="op">(</span></span>
<span>      <span class="st">"forestplot"</span>,</span>
<span>      bm_dataset_name <span class="op">=</span> <span class="st">"adbm"</span>,</span>
<span>      group_dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>      subjid_var <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      cat_var <span class="op">=</span> <span class="st">"PARCAT1"</span>,</span>
<span>      par_var <span class="op">=</span> <span class="st">"PARAM"</span>,</span>
<span>      visit_var <span class="op">=</span> <span class="st">"AVISIT"</span>,</span>
<span>      value_vars <span class="op">=</span> <span class="st">"AVAL"</span>,</span>
<span>      numeric_numeric_functions <span class="op">=</span> <span class="va">fp_numeric_numeric_functions</span>,</span>
<span>      numeric_factor_functions <span class="op">=</span> <span class="va">fp_numeric_factor_functions</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  filter_data <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>  filter_key <span class="op">=</span> <span class="st">"USUBJID"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Luis Moris Fernandez, Miguel Lechon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
